# Modbus协议  
1.什么是modbus协议？  
modbus协议是工业领域通信协议的业界标准，并且是当前工业电子设备之间常用的连接方式之一。  
***
* modbus通信模式可分为RTU模式、ASCII模式和TCP/IP模式。他们的数据模型和功能调用上都是相同的，只有传输报文封装方式是不同的。  
* RTU模式和TCP/IP模式非常相似，唯一的差别是RTU最后带两个字节的CRC校验，而TCP/IP没有  
* RTU模式和ASCII模式的区别就是把RTU的每一个字节(例如：27H)高四位(2)和低四位(7)拆分为两个字节，并以ASCII码的方式表现出来(32 37),再给命令帧分别加上起始符和结束符就可以了，但是他们的校验方式是不同的
* 通常情况下，modbus协议是一个主/从（master/slave）或者客户端/服务器（Client/Server）架构的协议。  
***  
modbus事务处理过程：  
主机设备（或客户端）创建Modbus应用数据单元形成查询报文，其中功能码标识了像从机设备（或服务器端）指示将执行哪种操作。功能码占用一个字节，有效的码字范围是十进制1~255（其中128~255为异常响应保留）。查询报文创建完毕，主机设备（或客户端）向从机设备（或服务器）发送报文，从机设备（或服务器）接收报文后，根据功能码做出相应的动作，并将响应报文返回给主机设备（或客户端）。如下图所示  
![modbus事务处理](./modbus事务处理.png)
